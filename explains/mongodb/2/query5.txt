{ "stages" : [{ "$cursor" : { "query" : { "$and" : [{ "timeStamp" : { "$gt" : { "$date" : 1509519600000 } } }, { "timeStamp" : { "$lt" : { "$date" : 1510081810000 } } }, { "payload.temperature" : { "$gte" : 0 } }, { "payload.temperature" : { "$lte" : 42 } }] }, "fields" : { "payload" : 1, "sensorId" : 1, "sensors.type_.name" : 1, "timeStamp" : 1, "_id" : 0 }, "queryPlanner" : { "plannerVersion" : 1, "namespace" : "TippersDB.Observation", "indexFilterSet" : false, "parsedQuery" : { "$and" : [{ "payload.temperature" : { "$lte" : 42 } }, { "timeStamp" : { "$lt" : { "$date" : 1510081810000 } } }, { "timeStamp" : { "$gt" : { "$date" : 1509519600000 } } }, { "payload.temperature" : { "$gte" : 0 } }] }, "winningPlan" : { "stage" : "FETCH", "filter" : { "$and" : [{ "payload.temperature" : { "$lte" : 42 } }, { "payload.temperature" : { "$gte" : 0 } }] }, "inputStage" : { "stage" : "IXSCAN", "keyPattern" : { "timeStamp" : 1 }, "indexName" : "timeStamp_1", "isMultiKey" : false, "multiKeyPaths" : { "timeStamp" : [] }, "isUnique" : false, "isSparse" : false, "isPartial" : false, "indexVersion" : 2, "direction" : "forward", "indexBounds" : { "timeStamp" : ["(new Date(1509519600000), new Date(1510081810000))"] } } }, "rejectedPlans" : [] } } }, { "$lookup" : { "from" : "Sensor", "as" : "sensors", "localField" : "sensorId", "foreignField" : "_id" } }, { "$match" : { "sensors.type_.name" : { "$eq" : "Thermometer" } } }, { "$project" : { "_id" : false, "timeStamp" : true, "payload" : true, "sensorId" : true } }], "ok" : 1.0 }
